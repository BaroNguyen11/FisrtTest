<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dont make mistake</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <style>
        .container {
            border: 1px solid #000;
        }

        a {
            text-decoration: none;
        }

        p {
            margin: 0;
        }

        label {
            width: 200px;
            display: flex;
            justify-content: end;
            padding-right: 30px;
        }
    </style>
</head>

<body>
    <div class="container p-0">
        <img src="../img/banner.png" class="w-100 " alt="">
        <div class="d-flex gap-3 p-3">
            <h5 class="p-2">Free English Course</h5>
            <ul class="d-flex gap-3 list-unstyled align-items-center">
                <li><a href="">Trang chủ</a></li>
                <li><a href="">Giới thiệu</a></li>
                <li><a href="">Khóa học</a></li>
                <li><a href="" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Đăng
                        ký</a></li>
            </ul>
        </div>
        <hr>
        <h2>DANH SÁCH ĐĂNG KÝ KHÓA HỌC</h2>
        <table class="table-bordered w-100" id="tblinfo">
            <thead>
                <tr>
                    <th scope="col">Số tt</th>
                    <th scope="col">Họ tên</th>
                    <th scope="col">Ngày sinh</th>
                    <th scope="col">Điện thoại</th>
                    <th scope="col">Email</th>
                    <th scope="col">Khóa học</th>
                    <th scope="col">Hình thức học</th>
                    <th scope="col">Kỹ năng cần rèn luyện</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>

        <footer class="mt-3 text-center text-white bg-primary">
            <h3>Thông tin sinh viên</h3>
            <div class="d-flex flex-column gap-2">
                <p>Họ tên: <b>Nguyễn Văn Bảo</b></p>
                <p>Mã sinh viên: <b>23647241</b></p>
                <p>Mã lớp: <b>DHKTPM19A</b></p>
            </div>
        </footer>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg ">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">THÔNG TIN ĐĂNG KÝ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex mb-3">
                        <label for="">Họ tên</label>
                        <div class="flex-grow-1 d-flex gap-2 flex-column">
                            <input type="text" class="form-control" id="txthoten" onblur="checkHoten()">
                            <span class="text-danger" id="errht"></span>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Ngày sinh</label>
                        <div class="flex-grow-1 d-flex gap-2 flex-column">
                            <input type="date" class="form-control" id="txtns" onblur="checkNgaySinh()">
                            <span class="text-danger" id="errns"></span>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Điện thoại</label>
                        <div class="flex-grow-1 d-flex gap-2 flex-column">
                            <input type="text" class="form-control" id="txtsdt" onblur="checkSdt()">
                            <span class="text-danger" id="errsdt"></span>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Email</label>
                        <div class="flex-grow-1 d-flex gap-2 flex-column">
                            <input type="email" class="form-control" id="txtemail" onblur="checkEmail()">
                            <span class="text-danger" id="erremail"></span>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Khóa học</label>
                        <div class="flex-grow-1 d-flex gap-2 flex-column">
                            <select id="khoahoc" class="form-select">
                                <option value="">-- Chọn khóa học --</option>
                                <option value="3">Anh văn cơ bản</option>
                                <option value="6">Anh văn giao tiếp</option>
                                <option value="12">Luyện thi IELTS</option>
                            </select>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Thời gian học</label>
                        <div class="flex-grow-1 d-flex gap-2 flex-column">
                            <input type="text" class="form-control" id="txttime" readonly>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Chọn hình thức</label>
                        <div class="d-flex flex-column">
                            <div class="d-flex gap-2">
                                <input type="radio" name="hinhthuc" value="Học tại trung tâm" onblur="checkHoten()"> Học tại
                                trung tâm
                            </div>
                            <div class="d-flex gap-2">
                                <input type="radio" name="hinhthuc" value="Học online"> Học online
                            </div>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <label for="">Kỹ năng cần rèn luyện</label>
                        <div class="d-flex flex-column">
                            <div class="d-flex gap-2">
                                <input type="checkbox" id="chknghe"> Kỹ năng nghe
                            </div>
                            <div class="d-flex gap-2">
                                <input type="checkbox" id="chkdoc"> Kỹ năng đọc
                            </div>
                            <div class="d-flex gap-2">
                                <input type="checkbox" id="chkviet"> Kỹ năng viết
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal" onclick="Signin()">Đăng
                        ký</button>
                    <button type="button" class="btn btn-danger">Hủy</button>
                </div>
            </div>
        </div>
    </div>
    <!-- script -->
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            const thoiGianTheoKhoa = {
                '3': '3 tháng',
                '6': '6 tháng',
                '12': '12 tháng',
            }
            $('#khoahoc').change(function () {
                const khoa = $(this).val();
                if (thoiGianTheoKhoa[khoa]) {
                    $('#txttime').val(thoiGianTheoKhoa[khoa]);
                    $('#errkhoahoc').text('');
                }
                else {
                    $('#errkhoahoc').text('Khóa học không hợp lệ!');
                    $('#txttime').val('');
                }
            });
        });
        function checkHoten() {
            let hoten = $('#txthoten').val().trim();
            let regex = /^[A-Za-z]+( [A-Za-z+]+)+$/;
            if (hoten === '' || !regex.test(hoten)) {
                $('#errht').text('Họ tên không hợp lệ!');
                return false;
            }
            $('#errht').text('');
            return true;
        }
        function checkNgaySinh() {
            let ns = new Date($('#txtns').val());
            let today = new Date();
            let age = today.getFullYear() - ns.getFullYear();
            let month = today.getMonth() - ns.getMonth();
            if (month < 0 || (month === 0 && today.getDate() < ns.getDate())) {
                age--;
            }
            if (age < 0) {
                $('#errns').text('Ngày sinh không hợp lệ!');
                return false;
            }
            $('#errns').text('');
            return true;
        }
        function checkEmail() {
            let email = $('#txtemail').val().trim();
            let regex = /^\w+@\w+\.com$/;
            if (email === '' || !regex.test(email)) {
                $('#erremail').text('Email không hợp lệ!');
                return false;
            }
            $('#erremail').text('');
            return true;
        }
        function checkSdt() {
            let sdt = $('#txtsdt').val().trim();
            let regex = /^0(3|8|9)\d{8}$/;
            if (sdt === '' || !regex.test(sdt)) {
                $('#errsdt').text('Số điện thoại không hợp lệ!');
                return false;
            }
            $('#errsdt').text('');
            return true;
        }
        let count = 1;
        function Signin() {
            if (!checkHoten() || !checkNgaySinh() || !checkEmail() || !checkSdt()) {
                alert('Vui lòng kiểm tra lại thông tin!');
                return false;
            }
            let hoten = $('#txthoten').val().trim();
            let ns = $('#txtns').val().trim();
            let sdt = $('#txtsdt').val().trim();
            let email = $('#txtemail').val().trim();
            let khoahoc = $('#khoahoc').val().trim() +' tháng';
            let hinhthuc = $('input[name="hinhthuc"]:checked').val().trim();
            let kyNang = [];
            if ($('#chknghe').is(':checked')) kyNang.push('Kỹ năng nghe');
            if ($('#chkdoc').is(':checked')) kyNang.push('Kỹ năng đọc');
            if ($('#chkviet').is(':checked')) kyNang.push('Kỹ năng viết');
            let kyNangStr = kyNang.join(', ');
            let row = `<tr>
                <td>${count++}</td>
                <td>${hoten}</td>
                <td>${ns}</td>
                <td>${sdt}</td>
                <td>${email}</td>
                <td>${khoahoc}</td>
                <td>${hinhthuc}</td>
                <td>${kyNangStr}</td>
            </tr>`;
            $('#tblinfo tbody').append(row);
            return true;
        }
    </script>
</body>

</html>